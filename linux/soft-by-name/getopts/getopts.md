<h1>getopts</h1>

# Links

* getopts(1p) — Linux manual page  
  https://man7.org/linux/man-pages/man1/getopts.1p.html
* Команда getopts  
  https://linux-faq.ru/page/komanda-getopts
* getopts   
  https://sites.google.com/site/kfgnb0101/home/Doc/unix-shell-scripting-tutorial/reference-book-of-shell/getopts

# CMD-info

* help
````shell
getopts --help  &>getopts-help.txt
````

* man
````shell
# man getopts &>getopts-man.txt
#  Нет справочной страницы для getopts
````

```shell
# getopts -version
# bash: getopts: -v: недопустимый параметр
```

# Info

Команда getopts является встроенной командой командной оболочки bash, предназначенной для разбора параметров сценариев. 
Она обрабатывает исключительно однобуквенные параметры как с аргументами, так и без них и этого вполне достаточно для передачи сценариям любых входных данных.

Базовый синтаксис команды выглядит следующим образом:
```shell
$ getopts строка-параметров переменная [набор-параметров]
```

Строка параметров формируется из принимаемых сценарием однобуквенных параметров с символами 
двоеточия после тех из них, которые должны использоваться совместно с аргументами (символ 
двоеточия в начале строки активирует режим сокрытия сообщений об ошибках). 
Переменная используется для хранения текущего параметра. 
Набор параметров позволяет осуществлять разбор пользовательского списка параметров вместо 
параметров сценария (используется достаточно редко). 

В ходе обработки параметров сценария могут использоваться такие переменные, как 
переменная $OPTARG, содержащая аргумент текущего параметра, 
переменная $OPTIND, содержащая номер следующего за текущим параметра и 
переменная $OPTERR, содержащая значение 0 или 1, указывающее на необходимость вывода 
сообщений об ошибках при обработке каждого из параметров (перед обработкой каждого из 
параметров устанавливается значение 1, поэтому вам придется самостоятельно устанавливать 
значение 0 для сокрытия сообщений об ошибках).

Чаще всего обработка параметров осуществляется в рамках цикла while с вложенной 
конструкцией switch-case, причем в случае необходимости обработки дополнительных аргументов 
сценариев (например, в случае передачи списка файлов) после цикла используется конструкция 
shift "$(($OPTIND -1))". 
Команда корректно обрабатывает как отдельно переданные параметры (например, -a -b -c), так и 
объединенные параметры (например, -abc).


# CMD-demo

```shell
bash ./demos/getopts-demo-1.sh -a aaa -b bbb
```

```shell
bash ./demos/getopts-demo-2.sh -a aaa -b bbb
```

```shell
bash ./demos/getopts-demo-2.sh -a aaa
```

```shell
bash ./demos/getopts-demo-2.sh -a ./demos
```